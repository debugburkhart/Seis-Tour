<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sortable Flex Table</title>
<style>
  .flex-table {
    display: flex;
    flex-direction: column;
  }
  .flex-table-row {
    display: flex;
  }
  .flex-table-cell {
    flex: 1;
    padding: 8px;
    border: 1px solid #ddd;
    cursor: pointer; /* Add cursor pointer for clickable cells */
  }
</style>
</head>
<body>
  <div class="flex-table" id="sortable-table">
    <div class="flex-table-row">
      <div class="flex-table-cell" onclick="sortTable(0)">Name</div>
      <div class="flex-table-cell" onclick="sortTable(1)">Age</div>
      <div class="flex-table-cell" onclick="sortTable(2)">Country</div>
    </div>
    <div class="flex-table-row">
      <div class="flex-table-cell">John Doe</div>
      <div class="flex-table-cell">25</div>
      <div class="flex-table-cell">USA</div>
    </div>
    <div class="flex-table-row">
      <div class="flex-table-cell">Jane Smith</div>
      <div class="flex-table-cell">30</div>
      <div class="flex-table-cell">Canada</div>
    </div>
    <div class="flex-table-row">
      <div class="flex-table-cell">Michael Johnson</div>
      <div class="flex-table-cell">22</div>
      <div class="flex-table-cell">UK</div>
    </div>
  </div>

  <script>
    const sortStates = {}; // Object to store sorting state for each column

    function sortTable(columnIndex) {
      const table = document.getElementById('sortable-table');
      const rows = Array.from(table.querySelectorAll('.flex-table-row')).slice(1); // Exclude header row
      const headerRow = table.querySelector('.flex-table-row');

      // Toggle sorting state for the column
      sortStates[columnIndex] = sortStates[columnIndex] === 'asc' ? 'desc' : 'asc';

      const sortedRows = rows.sort((a, b) => {
        const aValue = a.children[columnIndex].textContent.trim();
        const bValue = b.children[columnIndex].textContent.trim();

        if (sortStates[columnIndex] === 'asc') {
          return aValue.localeCompare(bValue);
        } else if (sortStates[columnIndex] === 'desc') {
          return bValue.localeCompare(aValue);
        } else {
          // Unsorted state, maintain current order
          return 0;
        }
      });

      // Re-append header row to the table
      table.appendChild(headerRow);

      table.innerHTML = ''; // Clear table content except header row

      // Re-append sorted rows to the table
      sortedRows.forEach(row => table.appendChild(row));
    }
  </script>
</body>
</html>
